define(["exports","./initial-app-dae1c038"],(function(t,e){const a=.25;function o(t){const e=Math.random()*a,o=Math.random()*Math.PI*2,i=Math.sin(o)*e,n=Math.cos(o)*e;return[t[0]+i,t[1]+n,t[2]+i,t[3]+n,t[4]+i,t[5]+n]}function i(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}const n=(t,e)=>Math.random()*(e-t)+t,s=[[-.304,-1,0,-1,.304,-1],[.592,-.861,.782,-.623,.972,-.386],[1.043,-.074,.975,.223,.907,.519],[.708,.769,.434,.901,.16,1.033],[-.16,1.033,-.434,.901,-.708,.769],[-.907,.519,-.975,.223,-1.043,-.074],[-.972,-.386,-.782,-.623,-.592,-.861]];class r{constructor(t,{startPoints:e=t.map((t=>o(t))),minDuration:a=4e3,maxDuration:i=11e3}={}){this.points=e,this.minDuration=a,this.maxDuration=i,this.animStates=t.map(((t,s)=>({basePoint:t,pos:0,duration:n(a,i),startPoint:e[s],endPoint:o(t)})))}advance(t){this.points=this.animStates.map((e=>{e.pos+=t/e.duration,e.pos>=1&&(e.startPoint=e.endPoint,e.pos=0,e.duration=n(this.minDuration,this.maxDuration),e.endPoint=o(e.basePoint));const a=i(e.pos);return e.startPoint.map(((t,o)=>(e.endPoint[o]-t)*a+t))}))}draw(t){const e=this.points;t.beginPath(),t.moveTo(e[0][2],e[0][3]);for(let a=0;a<e.length;a++){const o=a===e.length-1?0:a+1;t.bezierCurveTo(e[a][4],e[a][5],e[o][0],e[o][1],e[o][2],e[o][3])}t.closePath(),t.fill()}}class h{constructor(){this.rotatePos=0,this.blobs=Array.from({length:4},((t,a)=>new r(s,{startPoints:e.startBlobs[a]})))}advance(t){this.rotatePos=(this.rotatePos+t/12e4)%1;for(const e of this.blobs)e.advance(t)}draw(t,e,a,o){t.save(),t.translate(e,a),t.scale(o,o),t.rotate(2*Math.PI*this.rotatePos);for(const e of this.blobs)e.draw(t);t.restore()}}const l=.0015;class c{constructor(t){this.bgBlobs=[],this.overallAlphaPos=0;const e=Math.round(t.width*t.height*25e-6);this.bgBlobs=Array.from({length:e},(()=>{const e=0===(a=Math.random())?0:Math.pow(2,10*a-10);var a;return{blob:new r(s,{minDuration:2e3,maxDuration:5e3}),velocity:.0055*(1-e)+l,alpha:Math.random()**3*(.8-.2)+.2,alphaMultiplier:1,spinTime:n(2e4,6e4),rotatePos:0,radius:53*e+7,x:Math.random()*t.width,y:Math.random()*t.height}}))}advance(t,e,o,i,n){1!==this.overallAlphaPos&&(this.overallAlphaPos=Math.min(1,this.overallAlphaPos+t/2e3));for(const s of this.bgBlobs){s.blob.advance(t);let r=Math.hypot(s.x-o,s.y-i);if(s.rotatePos=(s.rotatePos+t/s.spinTime)%1,r<10)switch(Math.floor(4*Math.random())){case 0:s.x=Math.random()*e.width,s.y=-s.radius*(1+a);break;case 1:s.x=-s.radius*(1+a),s.y=Math.random()*e.height;break;case 2:s.x=Math.random()*e.width,s.y=e.height+s.radius*(1+a);break;case 3:s.x=e.width+s.radius*(1+a),s.y=Math.random()*e.height}r=Math.hypot(s.x-o,s.y-i);const h=(r>300?s.velocity:(14*(1-r/300)+1)*s.velocity)*t,l=Math.atan2(o-s.x,i-s.y),c=Math.sin(l)*h,d=Math.cos(l)*h;s.x+=c,s.y+=d,s.alphaMultiplier=Math.min(r/n,1)}}draw(t){const e=i(this.overallAlphaPos);for(const a of this.bgBlobs)t.save(),t.globalAlpha=a.alpha*a.alphaMultiplier*e,t.translate(a.x,a.y),t.scale(a.radius,a.radius),t.rotate(2*Math.PI*a.rotatePos),a.blob.draw(t),t.restore()}}const d=.01;t.startBlobAnim=function(t){let o;const i=t.getContext("2d"),n=new h;let s;const r=document.querySelector("."+e.loadImg);let l=document.hasFocus(),u=l?1:0,m=!0;const b=()=>{"visible"===document.visibilityState&&(o=performance.now())},p=()=>{l=!0,m||g()},v=()=>{l=!1},P=new ResizeObserver((()=>{m||M(0)}));function M(e){const o=t.getBoundingClientRect();t.width=o.width*devicePixelRatio,t.height=o.height*devicePixelRatio;const h=r.getBoundingClientRect(),l=getComputedStyle(t),d=l.getPropertyValue("--blob-pink"),u=h.left-o.left+h.width/2,m=h.top-o.top+h.height/2,b=h.height/2/(1+a);i.scale(devicePixelRatio,devicePixelRatio),s||(s=new c(o)),s.advance(e,o,u,m,b),n.advance(e),i.globalAlpha=Number(l.getPropertyValue("--center-blob-opacity")),i.fillStyle=d,s.draw(i),n.draw(i,u,m,b)}function f(e){if(!t.isConnected)return removeEventListener("focus",p),removeEventListener("blur",v),P.disconnect(),void document.removeEventListener("visibilitychange",b);if(l)1!==u&&(u=Math.min(1,u+d));else if(u=Math.max(0,u-d),0===u)return void(m=!1);const a=(e-o)*u;o=e,M(a),requestAnimationFrame(f)}function g(){m=!0,requestAnimationFrame((t=>{o=t,f(t)}))}P.observe(t),addEventListener("focus",p),addEventListener("blur",v),document.addEventListener("visibilitychange",b),g()}}));
